        }
      }
      marker.setIcon(newIcon);
    });
  });

  fetchData().then(() => {
    setupFilters(); // Initialise les filtres après le chargement des données
  });

  // --- Ajout de la fonctionnalité de géolocalisation ---
  const GeolocateControl = L.Control.extend({
      onAdd: function(map) {
          const container = L.DomUtil.create('div', 'leaflet-bar leaflet-control leaflet-control-geolocate');
          container.innerHTML = '⌖'; // Icône de cible
          container.title = 'Me géolocaliser';

          L.DomEvent.on(container, 'click', function(e) {
              L.DomEvent.stopPropagation(e);
              map.locate({setView: true, maxZoom: 14});
          });

          return container;
      }
  });

  new GeolocateControl().addTo(map);

  // Gestion des événements de localisation
  map.on('locationfound', e => L.marker(e.latlng).addTo(map).bindPopup("Vous êtes ici !").openPopup());
  map.on('locationerror', e => alert("Impossible de vous géolocaliser.\n" + e.message));

</script>

<!-- Nouvelle section : liens vers les sections du site -->
<section id="explore" style="margin:1.5rem 0;">
  <h2>Les bonnes adresses</h2>

  <div style="display:flex;flex-wrap:wrap;gap:1rem;">
    <a class="button" href="pages/cities/strasbourg.html" aria-label="Coups de coeur à Strasbourg">Coups de cœur — Strasbourg</a>
    <a class="button" href="pages/countries/alsace.html" aria-label="Bien manger en Alsace">Bien manger — Alsace</a>
    <a class="button" href="pages/countries/pologne.html" aria-label="Voyager en Pologne">Voyager — Pologne</a>
    <a class="button" href="pages/cities/toulouse.html" aria-label="Voyager à Toulouse">Voyager — Toulouse</a>
  </div>
</section>

<section id="presentation">
  <p class="lead">
    Je partage ici des idées de cools restaus du monde entier, testés et adorés pour du bonheur dans l'assiette et de belles rencontres avec des restaurateurs passionnés.
    <br />
    <ul>
<li>Brunchs</li>
